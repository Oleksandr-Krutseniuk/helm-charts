extraDeploy:
  - apiVersion: autoscaling/v2
    kind: HorizontalPodAutoscaler
    metadata:
      name: redis-replicas
      namespace: redis-global
      labels:
        app.kubernetes.io/component: replica
        app.kubernetes.io/instance: redis
        app.kubernetes.io/name: redis
        app.kubernetes.io/version: 7.2.5
    spec:
      minReplicas: 2
      maxReplicas: 20
      scaleTargetRef:
        apiVersion: apps/v1
        kind: StatefulSet
        name: redis-replicas
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 60
      behavior:
        scaleUp:
          stabilizationWindowSeconds: 0
          policies:
          - type: Percent
            value: 100
            periodSeconds: 15
          - type: Pods
            value: 4
            periodSeconds: 15
          selectPolicy: Max
        scaleDown:
          stabilizationWindowSeconds: 480
          policies:
          - type: Percent
            value: 100
            periodSeconds: 15

